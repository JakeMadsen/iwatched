<div id="profile_header" style="background-image: url('/static/style/img/profile_images/users/<%= page_data.user._id %>/<%= page_data.user.profile.banner_image %>'); background-repeat: no-repeat; background-size: cover ">
    <div class="container">
        <div style="padding: 20px 0px 20px 0px;">
            <img id="profile_image_holder" class="img-fluid rounded" style="height: 160px" src="/static/style/img/profile_images/users/<%= page_data.user._id %>/<%= page_data.user.profile.profile_image %>"
                alt="">
        </div>
    </div>
</div>


<div id="profile_section" class="container">
    <h2>Update settings</h2>

    <form action="/<%= user._id %>/settings" method="POST" encType="multipart/form-data">
        <!-- Images -->
        <div class="row">
            <div class="col-md-6">
                <div class="profile-picture">
                    <label for="profile-picture-file">Profile Picture</label>
                    <div class="profile-picture-file">
                        <input name="profilePictureFile" type="file" id="profilePictureFile">
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="profile-banner">
                    <label for="profile-banner-file">Banner Image</label>
                    <div class="profile-banner-file">
                        <input type="hidden" value="<%= user._id %>">
                        <input name="profileBannerFile" type="file" id="profileBannerFile">
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="user_username">Username</label>
                    <input name="username" type="text" class="form-control" id="user_username" aria-describedby="usernameHelp"
                        value="<%= user.local.username %>" readonly>
                    <small id="usernamelHelp" class="form-text text-muted">Cannot be changed yet</small>
                </div>

                <div class="form-group">
                    <label for="user_email">Email</label>
                    <input name="email" type="email" class="form-control" id="user_email" value="<%= user.local.email %>">
                </div>

                <div class="form-group">
                    <label for="user_password">Password</label>
                    <input name="password" type="password" class="form-control" id="user_password" value="">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="user_custom_url">Custom URL</label>
                    <input name="custom_url" type="text" class="form-control" id="user_custom_url" aria-describedby="user_custom_urlHelp"
                        value="<%= user.profile.custom_url %>" readonly>
                    <small id="user_custom_urlHelp" class="form-text text-muted">Will be added in next update</small>
                </div>

                <div class="form-group">
                    <label for="editor_email">Birthday</label>
                    <input name="birthday" type="date" class="form-control" id="editor_name" value="<%= user.profile.birthday %>">
                </div>

                <div class="form-group">
                    <label for="user_password_confirm">Confirm Password</label>
                    <input name="password_confirm" type="password" class="form-control" id="user_password_confirm"
                        value="">
                </div>
            </div>
        </div>

        <!-- Description -->
        <div class="form-group">
            <label for="editor_description">Profile Description</label>
            <textarea name="description" rows="10" class="form-control" id="editor_description" placeholder=""><%= user.profile.description %></textarea>
        </div>

        <button type="submit" class="btn btn-primary btn-lg btn-block">Update Settings</button>
    </form>

    <!-- To be cleaned up. Not pretty -->

    <script>
        var password = document.getElementById("user_password")
            , confirm_password = document.getElementById("user_password_confirm");

        function validatePassword() {
            if (password.value != confirm_password.value) {
                confirm_password.setCustomValidity("Passwords Don't Match");
            } else {
                confirm_password.setCustomValidity('');
            }
        }

        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;
    </script>
</div>
<div class="container" style="margin-top: 10px;">
  <div class="row">
    <div class="col-md-9">
      <h1 style="margin-bottom:6px;">
        <%= (page_data.show||{}).name %>
        <% if (page_data.season_number) { %>
          <small style="opacity:.8; font-size: 60%;">Season <%= page_data.season_number %></small>
        <% } %>
      </h1>
      <% if (!page_data.season_number) { %>
        <div style="opacity:.9; margin-bottom: 12px;">Select a season to view episodes.</div>
      <% } %>
    </div>
    <div class="col-md-3 text-right">
      <a style="color:lightblue;" href="/shows/<%= (page_data.show||{}).id %>">Back to series</a>
    </div>
  </div>

  <% if (!page_data.season_number) { %>
  <h2>Seasons</h2>
  <hr>
  <div class="row">
    <% ((page_data.show||{}).seasons||[]).forEach(function(season){ if (season.name.toString() !== 'Specials') { %>
      <div class="col-md-2 image-box">
        <a href="/shows/<%= page_data.show.id %>/season/<%= season.season_number %>">
          <img class="img-fluid image-box-hover" src="https://image.tmdb.org/t/p/w500/<%= season.poster_path %>" alt="">
          <div class="movie-hover"><h2><%= season.name %></h2></div>
        </a>
      </div>
    <% } }); %>
  </div>
  <% } %>

  <% if (page_data.season_number && (page_data.season||{}).id) { %>
  <div class="row">
    <div class="col-md-12">
      <div style="display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap;">
        <% if (page_data.season.poster_path) { %>
          <img src="https://image.tmdb.org/t/p/w342/<%= page_data.season.poster_path %>" class="img-fluid" style="border-radius:6px; max-width: 220px;">
        <% } %>
        <div style="color: #ffff; flex:1 1 300px;">
          <h2 style="margin-top:0;">Season <%= page_data.season.season_number %></h2>
          <% if (page_data.season.overview) { %>
            <div style="margin-bottom: 10px;"><%= page_data.season.overview %></div>
          <% } %>
          <% if (page_data.season.air_date) { %>
            <div>Air date: <%= page_data.season.air_date %></div>
          <% } %>
          <% if ((page_data.episodes||[]).length) { %>
            <div>Episodes: <%= page_data.episodes.length %></div>
          <% } %>
        </div>
      </div>
    </div>
  </div>

  <% if ((page_data.episodes||[]).length) { %>
  <h3 style="margin-top:18px;">Episodes</h3>
  <hr>
  <div class="row">
    <% page_data.episodes.forEach(function(ep){ %>
      <div class="col-md-6" style="margin-bottom: 14px;">
        <div class="card" style="background: rgba(255,255,255,.05); border: none;">
          <div class="row no-gutters">
            <div class="col-4">
              <% if (ep.still_path) { %>
                <img src="https://image.tmdb.org/t/p/w300/<%= ep.still_path %>" class="img-fluid" style="border-radius: 4px 0 0 4px;">
              <% } %>
            </div>
            <div class="col-8">
              <div class="card-body" style="color:#ffff; padding: 10px 12px;">
                <h5 class="card-title" style="margin-bottom:4px;">E<%= ep.episode_number %>: <%= ep.name %></h5>
                <% if (ep.overview) { %>
                  <p class="card-text" style="opacity:.9; font-size: 90%; max-height: 4.2em; overflow: hidden;">
                    <%= ep.overview %>
                  </p>
                <% } %>
                <div class="card-text" style="opacity:.75; font-size: 85%;">
                  <% if (ep.air_date) { %>Air date: <%= ep.air_date %><% } %>
                  <% if (ep.vote_average) { %> &nbsp; • ★ <%= ep.vote_average %><% } %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% }); %>
  </div>
  <% } %>
  <% } %>
</div>

